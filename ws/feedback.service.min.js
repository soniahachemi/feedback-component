angular.module("feedback.createFeedback").service("wsSubmitFeedback",function(e,t,r,a){"use strict";function n(e){var t=e.data;return 200!==t.status?o(e):t.hasOwnProperty("data")&&t.data||t}function o(t){if(-1===t.status)return e.reject();var r=t.data&&t.data.error||"Unknown error";return t.hasOwnProperty("status")&&t.status>0&&a.error(r),e.reject(r)}function s(e){return r(angular.extend(e,{url:"/datacenter/tools/feedback/ws/ws.cgi",method:"post"})).then(n,o)}function u(t){return d.hasOwnProperty(t)&&angular.isFunction(d[t].resolve())&&(d[t].resolve(),delete d[t]),d[t]=e.defer(),d[t].promise}function i(e){return e.data.objectType=c,e.noTimeout||e.timeout||(e.timeout=u(e.data.action)),delete e.noTimeout,s(e)}var c="feedback",d={};this.submitFeedback=function(e){return i({data:{action:"submitFeedback",url:e.url,message:e.message,screenshot:e.screenshot,browser:t.browser,device:t.device,os:t.os,os_version:t.os_version,browser_version:t.browser_version,app_name:e.app_name,app_version:e.app_version,type:e.type}})}});
